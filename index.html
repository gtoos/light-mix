<!DOCTYPE HTML>
<html lang="en">
	<head>
		<link type="text/css" rel="stylesheet" href="resources/css/default.css" />
		<link type="text/css" rel="stylesheet" href="resources/css/range-input-skin.css" />
		<script src="vendors/jquery/jquery-1.11.1.min.js"></script> 
		<script src="vendors/rangeslider.js-0.2.9/rangeslider.min.js"></script>
		<script src="vendors/jquery/jquery.tools.min.js"></script>
		<script src="resources/js/library.js"></script>
	</head> 
	<body>
	    <h1>Light theesko</h1>
	    <div class="outer-wrapper">
		    <div id="lightSourceWrapper" width="900" height="600">
			    <div id="redSource" class="light-source-red">
					<input type="range" class="slider" id="red-slider" name="redSlider" min="0" max="100" step ="5" value="10" />
			    </div>
			    <div id="blueSource" class="light-source-blue"> 
					<input type="range" class="slider" id="blue-slider" name="blueSlider" min="0" max="100" step ="5" value="10" />
			    </div>
			    <div id="greenSource" class="light-source-green"> 
					<input type="range" class="slider" id="green-slider" name="greenSlider" min="0" max="100" step ="5" value="10" />
			    </div>
			    <a href="/" id="message-show">Show</a>
			</div>
			<div class="messagepop pop" id="message-pop">
		        <img id="message-image" src="resources/images/default.gif" />
			    <p id="message-pop-text">Some instructions or something like that</p>
			    <a class="close" href="/">Close</a>			    		
			</div>	
	    <canvas id="lightCanvas" class="stage" width="920" height="600"></canvas>
   	    <canvas id="beamCanvas" class="beam" width="920" height="600"></canvas>
	    </div>

	    <script>
			var canvas = document.getElementById('lightCanvas');
			var canvasContext = canvas.getContext('2d');

			//initializing canvas
			initCanvas("lightCanvas", "black", "1");

			//initializing sliders
			$(":range").rangeinput();

			//initialize level	
			var currentLevel = 0;
			var finalLevel = 5;

			showInstructions();

			initLevel(currentLevel);

	      	// Handling slider event
	      	$(".slider").on("change", 
		      	function() { 
		      		draw();
		      		if(isLevelComplete(currentLevel)) { 
		      			//Checking if final
		      			if(currentLevel < finalLevel) {
		       				levelCleanUp(currentLevel);
		      				currentLevel++;
		      				initLevel(currentLevel);
		      			} else {
		      				console.log("game over");
		      				showPopMessage("Game Over!", 5000);
			      			currentLevel = 1;
			      			// exit();
		      			}

		      		} else {
		      			console.log("Keep trying");
		      		} 
		    });

		    // Handling exit event

		</script>
	</body>
</html>